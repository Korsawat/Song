(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(e,t,a){},13:function(e,t,a){},14:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),l=a(2),r=a.n(l);a(12);const o="".concat("https://accounts.spotify.com/authorize","?client_id=").concat("e09c3389cd8f4a0c92f03e1bc5b423c2","&redirect_uri=").concat("http://localhost:3000/callback","&scope=").concat(["user-library-read"].join("%20"),"&response_type=token&show_dialog=true");a(13);var s=()=>{const[e,t]=Object(n.useState)(""),[a,l]=Object(n.useState)([]),[r,s]=Object(n.useState)([]),[i,m]=Object(n.useState)([null,null]),[d,u]=Object(n.useState)(0),[E,h]=Object(n.useState)(!1);Object(n.useEffect)(()=>{const e=window.location.hash.substring(1).split("&").reduce((e,t)=>{let a=t.split("=");return e[a[0]]=decodeURIComponent(a[1]),e},{});window.location.hash="";const a=e.access_token;a&&(t(a),(async e=>{let t,a=0,n=[];do{const c=await fetch("https://api.spotify.com/v1/me/tracks?limit=".concat(50,"&offset=").concat(a),{headers:{Authorization:"Bearer ".concat(e)}});t=await c.json(),n=[...n,...t.items],a+=50}while(a<t.total);return n.map(e=>({track:e.track,compared:!1,wins:0}))})(a).then(e=>{l(e.map(e=>({...e,compared:!1}))),u(0);const t=p(e);s(t),g(t)}))},[]),Object(n.useEffect)(()=>{const e=a.length,t=a.filter(e=>e.compared).length;u(t/e*100)},[a]);const p=e=>{const t=[];for(let a=0;a<e.length-1;a++)for(let n=a+1;n<e.length;n++)t.push([e[a],e[n]]);return t},g=e=>{const t=e.filter(e=>!e[0].compared||!e[1].compared);if(0===t.length)return void h(!0);const a=Math.floor(Math.random()*t.length);m(t[a]),s(e.filter(e=>e!==t[a]))},k=(e,t)=>{const n=a.map(t=>t.track.id===e.track.id?{...t,compared:!0,wins:(t.wins||0)+1}:t);l(n),g(r)};return c.a.createElement("div",{className:"App"},c.a.createElement("div",{className:"header"},"Song Comparison"),e?c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"total-liked-songs"},"Total Liked Songs: ",a.length),E?c.a.createElement("div",{className:"ranked-songs"},c.a.createElement("h2",null,"Ranked Songs"),c.a.createElement("table",null,c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,"Rank"),c.a.createElement("th",null,"Song Name"))),c.a.createElement("tbody",null,(()=>{const e=a.sort((e,t)=>(t.wins||0)-(e.wins||0));let t=1;return e.forEach((a,n)=>{n>0&&(a.wins||0)!==(e[n-1].wins||0)&&(t=n+1),a.rank=t}),e})().map(e=>c.a.createElement("tr",{key:e.track.id},c.a.createElement("td",null,e.rank),c.a.createElement("td",null,e.track.name)))))):c.a.createElement(c.a.Fragment,null,i[0]&&i[1]?c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"song-container"},c.a.createElement("div",{className:"song",onClick:()=>k(i[0],i[1])},c.a.createElement("img",{src:i[0].track.album.images[0].url,alt:i[0].track.name}),c.a.createElement("div",null,i[0].track.name)),c.a.createElement("div",{className:"song",onClick:()=>k(i[1],i[0])},c.a.createElement("img",{src:i[1].track.album.images[0].url,alt:i[1].track.name}),c.a.createElement("div",null,i[1].track.name))),c.a.createElement("div",{className:"progress-container"},c.a.createElement("div",{className:"progress-bar"},c.a.createElement("div",{className:"progress",style:{width:"".concat(d,"%")}},Math.round(d),"%"))),c.a.createElement("div",{className:"buttons"},c.a.createElement("div",{className:"buttons-container"},c.a.createElement("button",{onClick:()=>{const e=a.map(e=>e.track.id===i[0].track.id||e.track.id===i[1].track.id?{...e,compared:!0,wins:(e.wins||0)+1}:e);l(e),g(r)}},"Can't Decide")),c.a.createElement("button",{onClick:()=>{h(!0)}},"Show Ranked Songs"))):c.a.createElement("div",null,"Loading..."))):c.a.createElement("a",{href:o},"Login to Spotify"))};var i=e=>{e&&e instanceof Function&&a.e(3).then(a.bind(null,15)).then(t=>{let{getCLS:a,getFID:n,getFCP:c,getLCP:l,getTTFB:r}=t;a(e),n(e),c(e),l(e),r(e)})};r.a.createRoot(document.getElementById("root")).render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(s,null))),i()},3:function(e,t,a){e.exports=a(14)}},[[3,1,2]]]);
//# sourceMappingURL=main.6bd7c7e5.chunk.js.map